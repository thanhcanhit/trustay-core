sequenceDiagram
    participant T as Tenant
    participant RSP as RoomSeekingPostService
    participant L as Landlord
    participant RI as RoomInvitationsService
    participant R as RentalsService
    participant C as ContractsService
    participant N as NotificationsService
    
    T->>RSP: POST /room-seeking-posts
    Note over RSP: Validate tenant role
    RSP->>RSP: Create seeking post
    RSP-->>T: Post created & published
    
    Note over L: Landlord browses seeking posts
    L->>RSP: GET /room-seeking-posts
    RSP-->>L: Return matching posts
    
    L->>RI: POST /room-invitations
    Note over RI: Create invitation based on post
    RI->>N: Notify tenant of invitation
    RI-->>L: Invitation sent
    
    T->>RI: PATCH /room-invitations/:id/respond (accept)
    RI->>RI: Update invitation status
    RI->>RSP: Auto-close seeking post
    Note over RSP: Update post status to 'closed'
    
    Note over RI,C: AUTO-GENERATION STARTS
    RI->>R: createRental(senderId, rentalData)
    R->>R: Create rental from invitation
    R->>C: autoCreateContractFromRental(rentalId)
    C->>C: Generate contract
    C->>N: Notify contract created
    C-->>R: Contract ready
    R-->>RI: Rental & Contract created
    RI-->>T: Success with rental & contract
    
    Note over T,L: Active rental with contract

