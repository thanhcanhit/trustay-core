flowchart TD
    A[Booking Approved] --> D[Create Rental]
    B[Invitation Accepted] --> D
    C[Manual Rental Creation] --> D
    
    D --> E[Auto-Generate Contract]
    E --> F[Generate Contract Number]
    F --> G[Extract Rental Data]
    G --> H[Build Contract Content]
    H --> I[Create Vietnamese Contract Text]
    I --> J[Set Contract Status]
    J --> K[Send Notifications]
    K --> L[Contract Ready]
    
    E --> M[Generation Failed?]
    M -->|Yes| N[Log Error]
    M -->|No| F
    
    N --> O[Continue Without Contract]
    
    style L fill:#90EE90
    style O fill:#FFB347
    style D fill:#87CEEB

